FROM gcr.io/distroless/static:nonroot
WORKDIR /
ARG BINARY
ARG TERRAFORM_VERSION
ARG TERRAFORM_PROVIDER_SOURCE
ARG TERRAFORM_PROVIDER_VERSION
ENV TERRAFORM_VERSION=${TERRAFORM_VERSION}
ENV TERRAFORM_PROVIDER_SOURCE=${TERRAFORM_PROVIDER_SOURCE}
ENV TERRAFORM_PROVIDER_VERSION=${TERRAFORM_PROVIDER_VERSION}
COPY ${BINARY} /usr/local/bin/provider
USER 65532:65532
ENTRYPOINT ["provider"]